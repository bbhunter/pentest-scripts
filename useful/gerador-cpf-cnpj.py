#!/usr/bin/python3
#
# Based on: https://gist.githubusercontent.com/lucascnr/24c70409908a31ad253f97f9dd4c6b7c/raw/08702d6da50690e8ce90d6fb44e8f0601d73849d/cpf_cnpj_generator.py
#

import sys
import random

if len(sys.argv) != 2:
    sys.exit("Você precisa informar ao menos 1 opção CPF ou CNPJ.")
else:
    opcao = str(sys.argv[1]).upper()
    if opcao != "CPF" and opcao != "CNPJ":
        sys.exit("Você precisa informar apenas CPF ou CNPJ.")

def generate_cpf():
    cpf = [random.randint(0, 9) for x in range(9)]

    for _ in range(2):
        val = sum([(len(cpf) + 1 - i) * v for i, v in enumerate(cpf)]) % 11

        cpf.append(11 - val if val > 1 else 0)

    return '%s%s%s.%s%s%s.%s%s%s-%s%s' % tuple(cpf)

def generate_cnpj():
    def calculate_special_digit(l):
        digit = 0

        for i, v in enumerate(l):
            digit += v * (i % 8 + 2)

        digit = 11 - digit % 11

        return digit if digit < 10 else 0

    cnpj =  [1, 0, 0, 0] + [random.randint(0, 9) for x in range(8)]

    for _ in range(2):
        cnpj = [calculate_special_digit(cnpj)] + cnpj

    return '%s%s.%s%s%s.%s%s%s/%s%s%s%s-%s%s' % tuple(cnpj[::-1])

if opcao == "CPF":
    print(generate_cpf())

if opcao == "CNPJ":
    print(generate_cnpj())
